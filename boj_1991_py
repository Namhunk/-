import sys

# 전위 순회
def preorder(start):
    string = ""

    # 루트, 왼쪽, 오른쪽 순으로 진행
    string += start

    left, right = graph[start]
    if left != '.':
        string += preorder(left)
    
    if right != '.':
        string += preorder(right)
    
    return string

# 중위 순회
def inorder(start):
    string = ""
    left, right = graph[start]

    # 왼쪽 루트 오른쪽 순으로 진행
    if left != '.':
        string += inorder(left)
    
    string += start

    if right != '.':
        string += inorder(right)
    
    return string

# 후위 순회
def postorder(start):
    string = ""

    left, right = graph[start]

    # 왼쪽 오른쪽 루트 순으로 진행
    if left != '.':
        string += postorder(left)
    
    if right != '.':
        string += postorder(right)
    
    string += start

    return string

n = int(sys.stdin.readline().strip())
alpha = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
graph = {i: [] for i in alpha[:n]}

for _ in range(n):
    p, l, r = sys.stdin.readline().strip().split()
    graph[p].append(l)
    graph[p].append(r)

print(preorder('A'))
print(inorder('A'))
print(postorder('A'))
